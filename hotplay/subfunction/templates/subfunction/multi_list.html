{% extends 'base.html' %}
{% load static %}

{% block headstyle %}
<link rel="canonical" href="https://getbootstrap.com/docs/4.4/examples/album/">

<!-- Bootstrap core CSS -->
<link href="https://getbootstrap.com/docs/4.4/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Favicons -->
<link rel="apple-touch-icon" href="https://getbootstrap.com/docs/4.4/assets/img/favicons/apple-touch-icon.png"
    sizes="180x180">
<link rel="icon" href="https://getbootstrap.com/docs/4.4/assets/img/favicons/favicon-32x32.png" sizes="32x32"
    type="image/png">
<link rel="icon" href="https://getbootstrap.com/docs/4.4/assets/img/favicons/favicon-16x16.png" sizes="16x16"
    type="image/png">
<link rel="manifest" href="https://getbootstrap.com/docs/4.4/assets/img/favicons/manifest.json">
<link rel="mask-icon" href="https://getbootstrap.com/docs/4.4/assets/img/favicons/safari-pinned-tab.svg"
    color="#563d7c">
<link rel="icon" href="https://getbootstrap.com/docs/4.4/assets/img/favicons/favicon.ico">
<meta name="msapplication-config" content="https://getbootstrap.com/docs/4.4/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#563d7c">

<style>
    .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }

    @media (min-width: 768px) {
        .bd-placeholder-img-lg {
            font-size: 3.5rem;
        }
    }
</style>

<!-- Custom styles for this template -->
<link href="https://getbootstrap.com/docs/4.4/examples/album/album.css" rel="stylesheet">
{% endblock %}

{% block content %}
{% for live in lives %}
<div class="col-lg-4 col-md-6">
    <div class="room-items">
        <div class="room-img set-bg">
            <img src="{{live.stream_thumbnail}}" style="width:100%; height:100%;">             
            <button data-id="{{live.id}}" class="btn-fav room-content">
                <i class="far fa-heart"></i>
            </button>
        </div>
        <div class="room-text">
            <div class="room-details">
                <div class="room-title">
                    <h5>{{live.title}}</h5>
                    <a href="#"><i class="fas fa-broadcast-tower"></i> <span>{{live.channel_name}}</span></a>
                    <a href="#" class="large-width"><i class="fas fa-user"></i>
                        <span>{{live.stream_views}}</span></a>
                </div>
            </div>
            <a href="#" class="site-btn btn-line">Left</a>
            <a href="#" class="site-btn btn-line">Right</a>
        </div>
    </div>
</div>
{% endfor %}
{% endblock %}
{% block script %}
<script>
$(function(){
    $(document).on('click','.btn-fav',function(){
            var id = $(this).data('id')
            var button = $(this)
            console.log(button)
            $.ajax({
            url:'{% url "favorite" %}',
            method:'POST',
            data:{
                csrfmiddlewaretoken:'{{csrf_token }}',
                stream:id
            },
            success:function(data){
                button.find('i').toggleClass(['fas','far'])
                button.toggleClass('text-white')
            },
            error:function(data){
            }
            })
        })
    });
})
</script>
{% endblock script %}